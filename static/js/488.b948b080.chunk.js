"use strict";(self.webpackChunkfront_end=self.webpackChunkfront_end||[]).push([[488],{7488:(e,s,a)=>{a.r(s),a.d(s,{default:()=>i});var r=a(5043),t=a(8802),n=a(3709),o=a(3003),l=a(1145),c=a(579);const i=()=>{const e=(0,o.wA)(),s=(0,n.Zp)(),{role:a,idUser:i}=(0,o.d4)((e=>e.user)),[d,m]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[p,g]=(0,r.useState)(!1),[x,b]=(0,r.useState)(!1),[j,f]=(0,r.useState)(""),[k,N]=(0,r.useState)("");(0,r.useEffect)((()=>{if(a&&i){let e="/personal-page";"admin 1"!==a&&"admin 2"!==a||(e="/admin/dashboard"),"partner"===a&&(e="/partner/personal-page"),s(e,{state:{personalPageId:i}})}}),[a,i,s]);return(0,c.jsx)("div",{className:"auth-wrapper",children:(0,c.jsx)("div",{className:"auth-inner",children:(0,c.jsxs)("form",{method:"POST",onSubmit:async a=>{a.preventDefault();const r=new FormData(a.target),n="on"===r.get("remember");r.append("rememberMe",n);const o=await t.A.postSignIn(r);if(console.log("This is response",o),o&&!1===o.success){const e=o.errors;g(!1),b(!1),f(""),N(""),"email"===e.path&&(g(!0),f(e.msg)),"password"===e.path&&(b(!0),N(e.msg))}else if(o&&!0===o.success){const{user:s,accessToken:a,refreshToken:r}=o;console.log("ressponse",s),n?(localStorage.setItem("accessToken",a),localStorage.setItem("refreshToken",r)):(sessionStorage.setItem("accessToken",a),sessionStorage.setItem("refreshToken",r)),e((0,l.iD)({idUser:s._id,username:s.username||s.organizationName,role:s.role,avatar:s.avatar||null,background:s.background||null}))}else!o||500!==o.status&&404!==o.status||s("/error-page",{state:{status:o.status,message:o.errors}})},children:[(0,c.jsx)("h3",{children:"Sign In"}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsxs)("label",{children:["Email ",(0,c.jsx)("sup",{className:"text-danger",children:"*"})]}),(0,c.jsx)("input",{type:"email",name:"email",className:"form-control",value:d,onChange:e=>{m(e.target.value),g(!1),f("")},placeholder:"Enter email",required:!0}),p&&(0,c.jsx)("p",{style:{color:"red",fontSize:"12px"},children:j})]}),(0,c.jsxs)("div",{className:"mb-3",children:[(0,c.jsxs)("label",{children:["M\u1eadt kh\u1ea9u ",(0,c.jsx)("sup",{className:"text-danger",children:"*"})]}),(0,c.jsx)("input",{type:"password",name:"password",className:"form-control",value:u,onChange:e=>{h(e.target.value),b(!1),N("")},placeholder:"Enter password",required:!0}),x&&(0,c.jsx)("p",{style:{color:"red",fontSize:"12px"},children:k})]}),(0,c.jsx)("div",{className:"mb-3",children:(0,c.jsxs)("div",{className:"custom-control custom-checkbox",children:[(0,c.jsx)("input",{type:"checkbox",className:"custom-control-input me-1",id:"customCheck1",name:"remember"}),(0,c.jsx)("label",{className:"custom-control-label",htmlFor:"customCheck1",children:"Ghi nh\u1edb"})]})}),(0,c.jsx)("div",{className:"d-grid",children:(0,c.jsx)("button",{type:"submit",className:"btn btn-success",children:"\u0110\u0103ng nh\u1eadp"})}),(0,c.jsxs)("p",{className:"forgot-password text-right",children:["Qu\xean ",(0,c.jsx)(n.N_,{to:"/forgot-password",children:"m\u1eadt kh\u1ea9u?"})]})]})})})}}}]);
//# sourceMappingURL=488.b948b080.chunk.js.map